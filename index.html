<!DOCTYPE html>
<html>
<head>
    <title>FACON - 기프티콘 낚시</title>
    <meta charset="utf-8"/>
    <!-- 카카오 SDK 로드 -->
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
</head>
<body>
    <!-- 로그인 버튼 -->
    <button id="kakao-login-btn">카카오 로그인</button>

    <script>
        // 1. SDK 초기화
        Kakao.init('4c62b1f03c15f3974661385234e62229');

        // 2. 페이지 로드시 로그인 상태면 사용자 정보 요청
        if (Kakao.Auth.getAccessToken()) {
            Kakao.API.request({
                url: '/v2/user/me',
                success: function(response) {
                    console.log('페이지 로드 시 사용자 정보', response);
                },
                fail: function(error) {
                    console.log('페이지 로드 시 요청 실패', error);
                }
            });
        } else {
            console.log('로그인된 상태가 아닙니다.');
        }

        // 3. 로그인 버튼 클릭 시 동작
        document.getElementById('kakao-login-btn').addEventListener('click', function() {
            Kakao.Auth.login({
                success: function(authObj) {
                    console.log('로그인 성공', authObj);

                    // 로그인 후 사용자 정보 요청
                    Kakao.API.request({
                        url: '/v2/user/me',
                        success: function(user) {
                            console.log('로그인 후 사용자 정보', user);
                        },
                        fail: function(error) {
                            console.error('사용자 정보 요청 실패', error);
                        }
                    });
                },
                fail: function(err) {
                    console.error('로그인 실패', err);
                }
            });
        });
    </script>
</body>
</html>
